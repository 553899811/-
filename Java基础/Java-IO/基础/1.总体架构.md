* [IO 概述](#io-概述)
    * [1. 字节流](#1-字节流)
        * [1.1 字节流层次结构图](#11-字节流层次结构图)
        * [1.2 常用的字节流类](#12-常用的字节流类)
        * [1.3 字节流读写](#13-字节流读写)
    * [2. 字符流](#2-字符流)
    * [3. 缓冲流](#3-缓冲流)

    
# IO 概述
![IO流](https://github.com/553899811/NewBie-Plan/blob/master/Java基础/Java-IO/img/01.jpg)

## 1. 字节流
### 1.1 字节流层次结构图
![输入输出流层次结构图](https://github.com/553899811/NewBie-Plan/blob/master/Java基础/Java-IO/img/1.jpg)

### 1.2 常用的字节流类
- InputStream/OutPutStream ——字节流基类
- FileInputStream/FileOutputStream ——处理文件类型
- ByteArrayInputStream/ByteArrayOutputStream——字节数组类型
- DataInputStream/DataOutputStream——装饰类
- BufferedInputStream/BufferedOutputStream——缓冲流

### 1.3 字节流读写
- 字节流读写步骤（文件复制）
```
    //封装数据源
    FileInputStream fin = new FileInputStream("F:\\a.png");
    //封装目的地
    FileOutputStream fou = new FileOutputStream("F:\\a2.png");
    //读写数据
    byte[] bytes = new byte[1024];
    int len = 0;
    while ((len=fin.read(bytes))!=-1){
        fou.write(bytes, 0, len);
    }
    //释放资源
    fin.close();
    fou.close();
```
- 字节流读取文件信息
```
    FileInputStream fin = new FileInputStream("f:\\b.txt");
    byte[] bytes = new byte[1024];
    fin.read(bytes,0,bytes.length);
    String str = new String(bytes);
    System.out.println(str);
    fin.close();
```
- 注1： 字节流操作字符串需把字符串转byte数组，需使用String类的getBytes()方法
```
    FileOutputStream out = new FileOutputStream(new File("f:\\b.txt"),true);
    out.write("hello".getBytes());
    out.close();
```
- 注2：换行和追加写数据
```
//换行输出  windows:\r\n  linux:\n  mac:\r
out.write("\r\n".getBytes());
//追加数据  构造方法第二个参数传true
FileOutputStream fos = new FileOutputStream("c.txt",true);
```
## 2. 字符流
- 字符流demo
```
    FileReader fr = new FileReader("d:\\林.txt");
    FileWriter fw = new FileWriter("d:\\窗.txt");
    
    char[] chs = new char[1024];
    int len;
    while((len=fr.read(chs))!=-1) {
    	fw.write(chs, 0, len);
    }
    fw.close();
    fr.close();
```
- 编码和解码

编码就是把字符转换为字节，而解码是把字节重新组合成字符。

不管是磁盘还是网络传输，最小的存储单元都是字节，而不是字符，所以操作字符需用到转换流，把字符转化为字节操作。

- 转换流
```
转换流其实就是一个字符流。
转换流 等于 字节流 + 编码表。

- 转换流的构造方法(charsetName例： “UTF-8”)
    public OutputStreamWriter(OutputStream out)//根据默认编码把字节流的数据转换为字符流
    public OutputStreamWriter(OutputStream out,String charsetName)//根据指定编码把字节流数据转换为字符流
  
    public InputStreamReader(InputStream in)
    public InputStreamReader(InputStream in,String charsetName)
```
- 转换流Demo
```
    FileOutputStream out = new FileOutputStream("f:\\b.txt", true);
	OutputStreamWriter osw = new OutputStreamWriter(out,"UTF-8");
	osw.write("你好");
	osw.close();
	System.out.println("------------------------");
	FileInputStream in = new FileInputStream("f:\\b.txt");
	InputStreamReader isr = new InputStreamReader(in,"UTF-8");
	int ch;
	while((ch=isr.read())!=-1) {
		System.out.println((char)ch);
	}
	isr.close();
```
- 字节流和字符流的区别
```
1. 字节流读取的时候，读到一个字节就返回一个字节； 字符流使用了字节流读到一个或多个字节（中文对应的字节数是两个，在UTF-8码表中是3个字节）时。先去查指定的编码表，将查到的字符返回。
2. 字节流可以处理所有类型数据，如：图片，MP3，AVI视频文件，而字符流只能处理字符数据。只要是处理纯文本数据，就要优先考虑使用字符流，除此之外都用字节流。
```

## 3. 缓冲流
以Buffered开头的类通常都为缓存流，例如BufferedReader，BufferedOutputStream等。缓存流读入一个字节/字符，先不输出，等凑足了缓冲的最大容量（自己定义的byte[]/char[]的最大容量）后一次性写出，从而提高了工作效率。该类的构造方法都需传入一个字节流、字符流的对象，以为其只提供缓冲，不负责具体的读写。

- 缓冲流类
```
BufferedReader：readLine 方法用于高效读取一行字符串
BufferedWriter：newLine 换行
BufferedInputStream、BufferedOutputStream用处少
```
- Demo
```
    ArrayList<String> array = new ArrayList<String>();
	array.add("hello");
	array.add("world");
	BufferedWriter bw = new BufferedWriter(new FileWriter("array.txt"));
	
	for(String s : array) {
		bw.write(s);
		bw.newLine();
		bw.flush();
	}
	bw.close();
```
