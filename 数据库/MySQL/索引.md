[TOC]


索引是一个单独的存储在磁盘上的数据库结构，他们包含着对数据表里所有记录的引用指针。索引的作用相当于图书的目录，可以根据目录中的页码快速找到所需的内容。

# 原理：
- 是在存储引擎中实现的，所以每一种存储引擎不一定支持所有索引类型；
- 索引的数据类型有Btree和Hash两种类型，例如Myisam、InnoDb 支持Btree，memory支持hash、Btree

# 优点：
- 当表中有大量记录时，若要对表进行查询，第一种搜索信息方式是全表搜索，是将所有记录一一取出，和查询条件进行一一对比，然后返回满足条件的记录，这样做会消耗大量数据库系统时间，并造成大量磁盘I/O操作；第二种就是在表中建立索引，然后在索引中找到符合查询条件的索引值，最后通过保存在索引中的ROWID（相当于页码）快速找到表中对应的记录。

总体说来，有以下三个优点：
1. 大大减少服务器需要扫描的数据量；
2. 可以帮助服务器避免排序和临时表；
3. 将随机IO转化为顺序IO

# 缺点：

- 索引占用磁盘空间，并且降低添加、删除和更新行的速度（因为数据改变时，索引也要动态维护嘛）。，所以经常改变的表一般不要建立过多索引；
- 创建索引也需要消耗时间。
# 分类：
## 1.普通索引和唯一索引
- 前者允许在定义索引的列中插入重复值和空值；
- 后者即索引列的值必须唯一，但允许为空；主键索引也是其中一种，但不能为空；
## 2.单列索引和组合索引
- 一个索引即包含单个列，一个表可以有多个单列索引；
- 在多个字段上创建的索引，最左前缀集合，不符合时是不会使用索引的；

## 3.全文索引——查找的文本中的关键词

- 支持全文查找，并允许在这些索引列中插入重复值和空值，在char、varchar、text等类型上创建；
- 只有MYISAM引擎支持；
- 适用于大型数据集合；

## 4.空间索引（R-TREE）

Postgresql的PostGIS支持的较好。

4种
创建空间索引的列必须为not null；
只在MYISAM引擎的表中创建；
# 索引的设计原则：
- 避免在经常更新的表中建立过多的索引，索引中的列要尽可能少；
- 数据量小的表最好不使用；
- 在不同值较少的列上不要建立索引，例如stu表中的sex列；
- 当唯一性是某种数据本身的特征时，指定唯一索引；
- 在频繁进行排序或分组的列上建立索引；

# 使用：

```
create table xxx
[col_name data_type] [unique|fulltext|spatial] [index|key] index_name (列名 [长度]) [asc|desc]

show index from child;//查看child表的索引
alter table users add index stunameind(stuName(10));//在stuName列添加单列索引，并指定索引长度为10
alter table users add index stunameind(stuName(10),stuClass(10));//组合索引

create [unique|fulltext|spatial] [index|key] index index_name on xxx (列名 [长度]) [asc|desc];
```






